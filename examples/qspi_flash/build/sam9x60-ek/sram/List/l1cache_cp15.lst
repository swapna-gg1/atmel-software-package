###############################################################################
#
# IAR ANSI C/C++ Compiler V8.50.1.245/W32 for ARM         17/Feb/2021  15:29:22
# Copyright 1999-2020 IAR Systems AB.
#
#    Cpu mode             
#    Endian            =  little
#    Source file       =
#        C:\work\AtmelSoftPAck\atmel-software-package-2.17\arch\arm\l1cache_cp15.c
#    Command line      =
#        -f C:\Users\c40450\AppData\Local\Temp\EW41BF.tmp
#        (C:\work\AtmelSoftPAck\atmel-software-package-2.17\arch\arm\l1cache_cp15.c
#        -D "SOFTPACK_VERSION=\"2.17\"" -D TRACE_LEVEL=5 -D VARIANT_SRAM -D
#        CONFIG_ARCH_ARMV5TE -D CONFIG_ARCH_ARM -D CONFIG_SOC_SAM9X60 -D
#        CONFIG_CHIP_SAM9X60 -D CONFIG_BOARD_SAM9X60_EK -D CONFIG_HAVE_AIC5 -D
#        CONFIG_HAVE_FLEXCOM -D CONFIG_HAVE_PIO3 -D CONFIG_HAVE_QSPI -D
#        CONFIG_HAVE_QSPI_DMA -D CONFIG_HAVE_PIT -D CONFIG_HAVE_SMC -D
#        CONFIG_HAVE_SDRAMC -D CONFIG_HAVE_MPDDRC -D
#        CONFIG_HAVE_MPDDRC_DATA_PATH -D CONFIG_HAVE_MPDDRC_IO_CALIBRATION -D
#        CONFIG_HAVE_MPDDRC_DDR2 -D CONFIG_HAVE_ADC_LOW_RES -D
#        CONFIG_HAVE_PMC_FAST_STARTUP -D CONFIG_HAVE_PMC_GENERATED_CLOCKS -D
#        CONFIG_HAVE_SCKC -D CONFIG_HAVE_NFD0_ON_D16 -D CONFIG_HAVE_XDMAC -D
#        CONFIG_HAVE_TRNG -D CONFIG_HAVE_PWMC -D CONFIG_HAVE_DDR2_W972GG6KB -D
#        CONFIG_HAVE_RSTC_EXTERNAL_RESET -D CONFIG_HAVE_RSTC_INDEPENDENT_RESET
#        -D CONFIG_HAVE_RTT -D CONFIG_HAVE_SHDWC -D CONFIG_HAVE_SPI -D
#        CONFIG_HAVE_SPI_NOR -D CONFIG_HAVE_MMU -D CONFIG_HAVE_L1CACHE -D
#        CONFIG_HAVE_OTPC -D CONFIG_HAVE_SPI_BUS -D CONFIG_HAVE_DBGU -D
#        CONFIG_HAVE_SERIALD_DBGU -D CONFIG_HAVE_USART -D
#        CONFIG_HAVE_USART_FIFO -D CONFIG_HAVE_DWDT --preprocess
#        C:\work\AtmelSoftPAck\atmel-software-package-2.17\examples\qspi_flash\build\sam9x60-ek\sram\List
#        -lC
#        C:\work\AtmelSoftPAck\atmel-software-package-2.17\examples\qspi_flash\build\sam9x60-ek\sram\List
#        --diag_suppress Pa050 -o
#        C:\work\AtmelSoftPAck\atmel-software-package-2.17\examples\qspi_flash\build\sam9x60-ek\sram\Obj
#        --no_cse --no_unroll --no_inline --no_code_motion --no_tbaa
#        --no_clustering --no_scheduling --debug --endian=little
#        --cpu=ARM926EJ-S -e --fpu=None --dlib_config "C:\Program Files
#        (x86)\IAR Systems\Embedded Workbench
#        8.4\arm\inc\c\DLib_Config_Normal.h" -I
#        C:\work\AtmelSoftPAck\atmel-software-package-2.17\examples\qspi_flash\..\..\arch\
#        -I
#        C:\work\AtmelSoftPAck\atmel-software-package-2.17\examples\qspi_flash\..\..\utils\
#        -I
#        C:\work\AtmelSoftPAck\atmel-software-package-2.17\examples\qspi_flash\..\..\target\common\
#        -I
#        C:\work\AtmelSoftPAck\atmel-software-package-2.17\examples\qspi_flash\..\..\target\sam9x60\
#        -I
#        C:\work\AtmelSoftPAck\atmel-software-package-2.17\examples\qspi_flash\..\..\drivers\
#        -I
#        C:\work\AtmelSoftPAck\atmel-software-package-2.17\examples\qspi_flash\..\..\lib\
#        --section .text=SOFTPACK --cpu_mode arm -On)
#    Locale            =  C
#    List file         =
#        C:\work\AtmelSoftPAck\atmel-software-package-2.17\examples\qspi_flash\build\sam9x60-ek\sram\List\l1cache_cp15.lst
#    Object file       =
#        C:\work\AtmelSoftPAck\atmel-software-package-2.17\examples\qspi_flash\build\sam9x60-ek\sram\Obj\l1cache_cp15.o
#    Runtime model:       
#      __SystemLibrary =  DLib
#      __dlib_version  =  6
#
###############################################################################

C:\work\AtmelSoftPAck\atmel-software-package-2.17\arch\arm\l1cache_cp15.c
      1          /* ----------------------------------------------------------------------------
      2           *         SAM Software Package License
      3           * ----------------------------------------------------------------------------
      4           * Copyright (c) 2015-2016, Atmel Corporation
      5           *
      6           * All rights reserved.
      7           *
      8           * Redistribution and use in source and binary forms, with or without
      9           * modification, are permitted provided that the following conditions are met:
     10           *
     11           * - Redistributions of source code must retain the above copyright notice,
     12           * this list of conditions and the disclaimer below.
     13           *
     14           * Atmel's name may not be used to endorse or promote products derived from
     15           * this software without specific prior written permission.
     16           *
     17           * DISCLAIMER: THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR
     18           * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
     19           * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
     20           * DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR ANY DIRECT, INDIRECT,
     21           * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
     22           * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
     23           * OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
     24           * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
     25           * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
     26           * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
     27           * ----------------------------------------------------------------------------
     28           */
     29          
     30          /*
     31           * L1 Cache functions implementation for ARMv5-TE and ARMv7-A
     32           */
     33          
     34          /*----------------------------------------------------------------------------
     35           *        Headers
     36           *----------------------------------------------------------------------------*/
     37          
     38          #include "chip.h"
     39          #include "barriers.h"

   \                                 In section SOFTPACK, align 4, keep-with-next
   \   static __interwork __softfp void dsb(void)
   \                     `dsb`:
   \        0x0   0xE3A0'0000        MOV      R0,#+0
   \        0x4   0xEE07'0F9A        mcr p15, 0, R0, c7, c10, 4
   \        0x8   0xE12F'FF1E        BX       LR               ;; return

   \                                 In section SOFTPACK, align 4, keep-with-next
   \   static __interwork __softfp void isb(void)
   \                     `isb`:
   \        0x0   0xE12F'FF1E        BX       LR               ;; return
     40          
     41          #include "arm/cp15.h"

   \                                 In section SOFTPACK, align 4, keep-with-next
   \   static __interwork __softfp uint32_t cp15_read_sctlr(void)
   \                     cp15_read_sctlr:
   \        0x0   0xEE11'0F10        mrc p15, 0, R0, c1, c0, 0
   \        0x4   0xE12F'FF1E        BX       LR               ;; return

   \                                 In section SOFTPACK, align 4, keep-with-next
   \   static __interwork __softfp void cp15_write_sctlr(uint32_t)
   \                     cp15_write_sctlr:
   \        0x0   0xEE01'0F10        mcr p15, 0, R0, c1, c0, 0
   \        0x4   0xE12F'FF1E        BX       LR               ;; return

   \                                 In section SOFTPACK, align 4, keep-with-next
   \   static __interwork __softfp uint32_t cp15_read_actlr(void)
   \                     cp15_read_actlr:
   \        0x0   0xEE11'0F30        mrc p15, 0, R0, c1, c0, 1
   \        0x4   0xE12F'FF1E        BX       LR               ;; return

   \                                 In section SOFTPACK, align 4, keep-with-next
   \   static __interwork __softfp void cp15_write_actlr(uint32_t)
   \                     cp15_write_actlr:
   \        0x0   0xEE01'0F30        mcr p15, 0, R0, c1, c0, 1
   \        0x4   0xE12F'FF1E        BX       LR               ;; return

   \                                 In section SOFTPACK, align 4, keep-with-next
   \   static __interwork __softfp void cp15_icache_invalidate(void)
   \                     cp15_icache_invalidate:
   \        0x0   0xE3A0'0000        MOV      R0,#+0
   \        0x4   0xEE07'0F15        mcr p15, 0, R0, c7, c5, 0
   \        0x8   0xE12F'FF1E        BX       LR               ;; return

   \                                 In section SOFTPACK, align 4, keep-with-next
   \   static __interwork __softfp void cp15_dcache_invalidate_setway(uint32_t)
   \                     cp15_dcache_invalidate_setway:
   \        0x0   0xEE07'0F56        mcr p15, 0, R0, c7, c6, 2
   \        0x4   0xE12F'FF1E        BX       LR               ;; return

   \                                 In section SOFTPACK, align 4, keep-with-next
   \   static __interwork __softfp void cp15_dcache_clean_setway(uint32_t)
   \                     cp15_dcache_clean_setway:
   \        0x0   0xEE07'0F5A        mcr p15, 0, R0, c7, c10, 2
   \        0x4   0xE12F'FF1E        BX       LR               ;; return

   \                                 In section SOFTPACK, align 4, keep-with-next
   \   static __interwork __softfp void cp15_dcache_clean_invalidate_setway(uint32_t)
   \                     cp15_dcache_clean_invalidate_setway:
   \        0x0   0xEE07'0F5E        mcr p15, 0, R0, c7, c14, 2
   \        0x4   0xE12F'FF1E        BX       LR               ;; return

   \                                 In section SOFTPACK, align 4, keep-with-next
   \   static __interwork __softfp void cp15_dcache_invalidate_mva(uint32_t)
   \                     cp15_dcache_invalidate_mva:
   \        0x0   0xEE07'0F36        mcr p15, 0, R0, c7, c6, 1
   \        0x4   0xE12F'FF1E        BX       LR               ;; return

   \                                 In section SOFTPACK, align 4, keep-with-next
   \   static __interwork __softfp void cp15_dcache_clean_mva(uint32_t)
   \                     cp15_dcache_clean_mva:
   \        0x0   0xEE07'0F3A        mcr p15, 0, R0, c7, c10, 1
   \        0x4   0xE12F'FF1E        BX       LR               ;; return

   \                                 In section SOFTPACK, align 4, keep-with-next
   \   static __interwork __softfp void cp15_dcache_clean_invalidate_mva(uint32_t)
   \                     cp15_dcache_clean_invalidate_mva:
   \        0x0   0xEE07'0F3E        mcr p15, 0, R0, c7, c14, 1
   \        0x4   0xE12F'FF1E        BX       LR               ;; return
     42          
     43          #include "mm/l1cache.h"
     44          
     45          #include <assert.h>
     46          
     47          /*----------------------------------------------------------------------------
     48           *        Global functions
     49           *----------------------------------------------------------------------------*/
     50          

   \                                 In section SOFTPACK, align 4, keep-with-next
     51          void icache_invalidate(void)
     52          {
   \                     icache_invalidate:
   \        0x0   0xE92D'5000        PUSH     {R12,LR}
     53          	cp15_icache_invalidate();
   \        0x4   0x....'....        BL       cp15_icache_invalidate
     54          	isb();
   \        0x8   0x....'....        BL       `isb`
     55          }
   \        0xC   0xE8BD'8001        POP      {R0,PC}          ;; return
     56          

   \                                 In section SOFTPACK, align 4, keep-with-next
     57          bool icache_is_enabled(void)
     58          {
   \                     icache_is_enabled:
   \        0x0   0xE92D'5000        PUSH     {R12,LR}
     59          	return (cp15_read_sctlr() & CP15_SCTLR_I) != 0;
   \        0x4   0x....'....        BL       cp15_read_sctlr
   \        0x8   0xE1B0'0620        LSRS     R0,R0,#+12
   \        0xC   0xE210'0001        ANDS     R0,R0,#0x1
   \       0x10   0xE8BD'8002        POP      {R1,PC}          ;; return
     60          }
     61          

   \                                 In section SOFTPACK, align 4, keep-with-next
     62          void icache_enable(void)
     63          {
   \                     icache_enable:
   \        0x0   0xE92D'4010        PUSH     {R4,LR}
     64          	uint32_t sctlr = cp15_read_sctlr();
   \        0x4   0x....'....        BL       cp15_read_sctlr
   \        0x8   0xE1B0'4000        MOVS     R4,R0
     65          	if ((sctlr & CP15_SCTLR_I) == 0) {
   \        0xC   0xE314'0D40        TST      R4,#0x1000
   \       0x10   0x1A00'0002        BNE      ??icache_enable_0
     66          		icache_invalidate();
   \       0x14   0x....'....        BL       icache_invalidate
     67          		cp15_write_sctlr(sctlr | CP15_SCTLR_I);
   \       0x18   0xE394'0D40        ORRS     R0,R4,#0x1000
   \       0x1C   0x....'....        BL       cp15_write_sctlr
     68          	}
     69          }
   \                     ??icache_enable_0:
   \       0x20   0xE8BD'8010        POP      {R4,PC}          ;; return
     70          

   \                                 In section SOFTPACK, align 4, keep-with-next
     71          void icache_disable(void)
     72          {
   \                     icache_disable:
   \        0x0   0xE92D'4010        PUSH     {R4,LR}
     73          	uint32_t sctlr = cp15_read_sctlr();
   \        0x4   0x....'....        BL       cp15_read_sctlr
   \        0x8   0xE1B0'4000        MOVS     R4,R0
     74          	if (sctlr & CP15_SCTLR_I) {
   \        0xC   0xE314'0D40        TST      R4,#0x1000
   \       0x10   0x0A00'0002        BEQ      ??icache_disable_0
     75          		cp15_write_sctlr(sctlr & ~CP15_SCTLR_I);
   \       0x14   0xE3D4'0D40        BICS     R0,R4,#0x1000
   \       0x18   0x....'....        BL       cp15_write_sctlr
     76          		icache_invalidate();
   \       0x1C   0x....'....        BL       icache_invalidate
     77          	}
     78          }
   \                     ??icache_disable_0:
   \       0x20   0xE8BD'8010        POP      {R4,PC}          ;; return
     79          

   \                                 In section SOFTPACK, align 4, keep-with-next
     80          bool dcache_is_enabled(void)
     81          {
   \                     dcache_is_enabled:
   \        0x0   0xE92D'5000        PUSH     {R12,LR}
     82          	return (cp15_read_sctlr() & (CP15_SCTLR_C | CP15_SCTLR_M)) ==
     83          		(CP15_SCTLR_C | CP15_SCTLR_M);
   \        0x4   0x....'....        BL       cp15_read_sctlr
   \        0x8   0xE210'0005        ANDS     R0,R0,#0x5
   \        0xC   0xE350'0005        CMP      R0,#+5
   \       0x10   0x1A00'0001        BNE      ??dcache_is_enabled_0
   \       0x14   0xE3A0'0001        MOV      R0,#+1
   \       0x18   0xEA00'0000        B        ??dcache_is_enabled_1
   \                     ??dcache_is_enabled_0:
   \       0x1C   0xE3A0'0000        MOV      R0,#+0
   \                     ??dcache_is_enabled_1:
   \       0x20   0xE210'00FF        ANDS     R0,R0,#0xFF      ;; Zero extend
   \       0x24   0xE8BD'8002        POP      {R1,PC}          ;; return
     84          }
     85          

   \                                 In section SOFTPACK, align 4, keep-with-next
     86          void dcache_enable(void)
     87          {
   \                     dcache_enable:
   \        0x0   0xE92D'4010        PUSH     {R4,LR}
     88          	uint32_t sctlr = cp15_read_sctlr();
   \        0x4   0x....'....        BL       cp15_read_sctlr
   \        0x8   0xE1B0'4000        MOVS     R4,R0
     89          	if ((sctlr & CP15_SCTLR_C) == 0) {
   \        0xC   0xE314'0004        TST      R4,#0x4
   \       0x10   0x1A00'0009        BNE      ??dcache_enable_0
     90          		assert(sctlr & CP15_SCTLR_M);
   \       0x14   0xE314'0001        TST      R4,#0x1
   \       0x18   0x1A00'0004        BNE      ??dcache_enable_1
   \       0x1C   0xE3A0'205A        MOV      R2,#+90
   \       0x20   0x....'....        LDR      R1,??DataTable4
   \       0x24   0x....'....        LDR      R0,??DataTable4_1
   \       0x28   0x....'....        BL       __aeabi_assert
   \       0x2C   0x....'....        BL       __iar_EmptyStepPoint
     91          		dcache_invalidate();
   \                     ??dcache_enable_1:
   \       0x30   0x....'....        BL       dcache_invalidate
     92          		cp15_write_sctlr(sctlr | CP15_SCTLR_C);
   \       0x34   0xE394'0004        ORRS     R0,R4,#0x4
   \       0x38   0x....'....        BL       cp15_write_sctlr
     93          	}
     94          }
   \                     ??dcache_enable_0:
   \       0x3C   0xE8BD'8010        POP      {R4,PC}          ;; return
     95          

   \                                 In section SOFTPACK, align 4, keep-with-next
     96          void dcache_disable(void)
     97          {
   \                     dcache_disable:
   \        0x0   0xE92D'4010        PUSH     {R4,LR}
     98          	uint32_t sctlr = cp15_read_sctlr();
   \        0x4   0x....'....        BL       cp15_read_sctlr
   \        0x8   0xE1B0'4000        MOVS     R4,R0
     99          	if (sctlr & CP15_SCTLR_C) {
   \        0xC   0xE314'0004        TST      R4,#0x4
   \       0x10   0x0A00'0003        BEQ      ??dcache_disable_0
    100          		dcache_clean();
   \       0x14   0x....'....        BL       dcache_clean
    101          		cp15_write_sctlr(sctlr & ~CP15_SCTLR_C);
   \       0x18   0xE3D4'0004        BICS     R0,R4,#0x4
   \       0x1C   0x....'....        BL       cp15_write_sctlr
    102          		dcache_invalidate();
   \       0x20   0x....'....        BL       dcache_invalidate
    103          	}
    104          }
   \                     ??dcache_disable_0:
   \       0x24   0xE8BD'8010        POP      {R4,PC}          ;; return
    105          

   \                                 In section SOFTPACK, align 4, keep-with-next
    106          void dcache_invalidate(void)
    107          {
   \                     dcache_invalidate:
   \        0x0   0xE92D'4038        PUSH     {R3-R5,LR}
    108          	uint32_t set, way;
    109          
    110          	for (way = 0; way < L1_CACHE_WAYS; way++)
   \        0x4   0xE3A0'5000        MOV      R5,#+0
   \                     ??dcache_invalidate_0:
   \        0x8   0xE355'0004        CMP      R5,#+4
   \        0xC   0x2A00'000A        BCS      ??dcache_invalidate_1
    111          		for (set = 0; set < L1_CACHE_SETS; set++)
   \       0x10   0xE3A0'0000        MOV      R0,#+0
   \       0x14   0xE1B0'4000        MOVS     R4,R0
   \                     ??dcache_invalidate_2:
   \       0x18   0xE354'0080        CMP      R4,#+128
   \       0x1C   0x2A00'0004        BCS      ??dcache_invalidate_3
    112          			cp15_dcache_invalidate_setway(L1_CACHE_SETWAY(set, way));
   \       0x20   0xE1B0'0F05        LSLS     R0,R5,#+30
   \       0x24   0xE190'0284        ORRS     R0,R0,R4, LSL #+5
   \       0x28   0x....'....        BL       cp15_dcache_invalidate_setway
   \       0x2C   0xE294'4001        ADDS     R4,R4,#+1
   \       0x30   0xEAFF'FFF8        B        ??dcache_invalidate_2
   \                     ??dcache_invalidate_3:
   \       0x34   0xE295'5001        ADDS     R5,R5,#+1
   \       0x38   0xEAFF'FFF2        B        ??dcache_invalidate_0
    113          
    114          	dsb();
   \                     ??dcache_invalidate_1:
   \       0x3C   0x....'....        BL       `dsb`
    115          }
   \       0x40   0xE8BD'8031        POP      {R0,R4,R5,PC}    ;; return
    116          

   \                                 In section SOFTPACK, align 4, keep-with-next
    117          void dcache_clean(void)
    118          {
   \                     dcache_clean:
   \        0x0   0xE92D'4038        PUSH     {R3-R5,LR}
    119          	uint32_t set, way;
    120          
    121          	for (way = 0; way < L1_CACHE_WAYS; way++)
   \        0x4   0xE3A0'5000        MOV      R5,#+0
   \                     ??dcache_clean_0:
   \        0x8   0xE355'0004        CMP      R5,#+4
   \        0xC   0x2A00'000A        BCS      ??dcache_clean_1
    122          		for (set = 0; set < L1_CACHE_SETS; set++)
   \       0x10   0xE3A0'0000        MOV      R0,#+0
   \       0x14   0xE1B0'4000        MOVS     R4,R0
   \                     ??dcache_clean_2:
   \       0x18   0xE354'0080        CMP      R4,#+128
   \       0x1C   0x2A00'0004        BCS      ??dcache_clean_3
    123          			cp15_dcache_clean_setway(L1_CACHE_SETWAY(set, way));
   \       0x20   0xE1B0'0F05        LSLS     R0,R5,#+30
   \       0x24   0xE190'0284        ORRS     R0,R0,R4, LSL #+5
   \       0x28   0x....'....        BL       cp15_dcache_clean_setway
   \       0x2C   0xE294'4001        ADDS     R4,R4,#+1
   \       0x30   0xEAFF'FFF8        B        ??dcache_clean_2
   \                     ??dcache_clean_3:
   \       0x34   0xE295'5001        ADDS     R5,R5,#+1
   \       0x38   0xEAFF'FFF2        B        ??dcache_clean_0
    124          
    125          	dsb();
   \                     ??dcache_clean_1:
   \       0x3C   0x....'....        BL       `dsb`
    126          }
   \       0x40   0xE8BD'8031        POP      {R0,R4,R5,PC}    ;; return
    127          

   \                                 In section SOFTPACK, align 4, keep-with-next
    128          void dcache_clean_invalidate(void)
    129          {
   \                     dcache_clean_invalidate:
   \        0x0   0xE92D'4038        PUSH     {R3-R5,LR}
    130          	uint32_t set, way;
    131          
    132          	for (way = 0; way < L1_CACHE_WAYS; way++)
   \        0x4   0xE3A0'5000        MOV      R5,#+0
   \                     ??dcache_clean_invalidate_0:
   \        0x8   0xE355'0004        CMP      R5,#+4
   \        0xC   0x2A00'000A        BCS      ??dcache_clean_invalidate_1
    133          		for (set = 0; set < L1_CACHE_SETS; set++)
   \       0x10   0xE3A0'0000        MOV      R0,#+0
   \       0x14   0xE1B0'4000        MOVS     R4,R0
   \                     ??dcache_clean_invalidate_2:
   \       0x18   0xE354'0080        CMP      R4,#+128
   \       0x1C   0x2A00'0004        BCS      ??dcache_clean_invalidate_3
    134          			cp15_dcache_clean_invalidate_setway(L1_CACHE_SETWAY(set, way));
   \       0x20   0xE1B0'0F05        LSLS     R0,R5,#+30
   \       0x24   0xE190'0284        ORRS     R0,R0,R4, LSL #+5
   \       0x28   0x....'....        BL       cp15_dcache_clean_invalidate_setway
   \       0x2C   0xE294'4001        ADDS     R4,R4,#+1
   \       0x30   0xEAFF'FFF8        B        ??dcache_clean_invalidate_2
   \                     ??dcache_clean_invalidate_3:
   \       0x34   0xE295'5001        ADDS     R5,R5,#+1
   \       0x38   0xEAFF'FFF2        B        ??dcache_clean_invalidate_0
    135          
    136          	dsb();
   \                     ??dcache_clean_invalidate_1:
   \       0x3C   0x....'....        BL       `dsb`
    137          }
   \       0x40   0xE8BD'8031        POP      {R0,R4,R5,PC}    ;; return
    138          

   \                                 In section SOFTPACK, align 4, keep-with-next
    139          void dcache_invalidate_region(uint32_t start, uint32_t end)
    140          {
   \                     dcache_invalidate_region:
   \        0x0   0xE92D'4070        PUSH     {R4-R6,LR}
   \        0x4   0xE1B0'4000        MOVS     R4,R0
   \        0x8   0xE1B0'5001        MOVS     R5,R1
    141          	uint32_t mva;
    142          
    143          	assert(start < end);
   \        0xC   0xE154'0005        CMP      R4,R5
   \       0x10   0x3A00'0004        BCC      ??dcache_invalidate_region_0
   \       0x14   0xE3A0'208F        MOV      R2,#+143
   \       0x18   0x....'....        LDR      R1,??DataTable4
   \       0x1C   0x....'....        LDR      R0,??DataTable4_2
   \       0x20   0x....'....        BL       __aeabi_assert
   \       0x24   0x....'....        BL       __iar_EmptyStepPoint
    144          
    145          	for (mva = start & ~(L1_CACHE_BYTES - 1); mva < end; mva += L1_CACHE_BYTES)
   \                     ??dcache_invalidate_region_0:
   \       0x28   0xE3D4'6007        BICS     R6,R4,#0x7
   \                     ??dcache_invalidate_region_1:
   \       0x2C   0xE156'0005        CMP      R6,R5
   \       0x30   0x2A00'0003        BCS      ??dcache_invalidate_region_2
    146          		cp15_dcache_invalidate_mva(mva);
   \       0x34   0xE1B0'0006        MOVS     R0,R6
   \       0x38   0x....'....        BL       cp15_dcache_invalidate_mva
   \       0x3C   0xE296'6008        ADDS     R6,R6,#+8
   \       0x40   0xEAFF'FFF9        B        ??dcache_invalidate_region_1
    147          
    148          	dsb();
   \                     ??dcache_invalidate_region_2:
   \       0x44   0x....'....        BL       `dsb`
    149          }
   \       0x48   0xE8BD'8070        POP      {R4-R6,PC}       ;; return
    150          

   \                                 In section SOFTPACK, align 4, keep-with-next
    151          void dcache_clean_region(uint32_t start, uint32_t end)
    152          {
   \                     dcache_clean_region:
   \        0x0   0xE92D'4070        PUSH     {R4-R6,LR}
   \        0x4   0xE1B0'4000        MOVS     R4,R0
   \        0x8   0xE1B0'5001        MOVS     R5,R1
    153          	uint32_t mva;
    154          
    155          	assert(start < end);
   \        0xC   0xE154'0005        CMP      R4,R5
   \       0x10   0x3A00'0004        BCC      ??dcache_clean_region_0
   \       0x14   0xE3A0'209B        MOV      R2,#+155
   \       0x18   0x....'....        LDR      R1,??DataTable4
   \       0x1C   0x....'....        LDR      R0,??DataTable4_2
   \       0x20   0x....'....        BL       __aeabi_assert
   \       0x24   0x....'....        BL       __iar_EmptyStepPoint
    156          
    157          	for (mva = start & ~(L1_CACHE_BYTES - 1); mva < end; mva += L1_CACHE_BYTES)
   \                     ??dcache_clean_region_0:
   \       0x28   0xE3D4'6007        BICS     R6,R4,#0x7
   \                     ??dcache_clean_region_1:
   \       0x2C   0xE156'0005        CMP      R6,R5
   \       0x30   0x2A00'0003        BCS      ??dcache_clean_region_2
    158          		cp15_dcache_clean_mva(mva);
   \       0x34   0xE1B0'0006        MOVS     R0,R6
   \       0x38   0x....'....        BL       cp15_dcache_clean_mva
   \       0x3C   0xE296'6008        ADDS     R6,R6,#+8
   \       0x40   0xEAFF'FFF9        B        ??dcache_clean_region_1
    159          
    160          	dsb();
   \                     ??dcache_clean_region_2:
   \       0x44   0x....'....        BL       `dsb`
    161          }
   \       0x48   0xE8BD'8070        POP      {R4-R6,PC}       ;; return
    162          

   \                                 In section SOFTPACK, align 4, keep-with-next
    163          void dcache_clean_invalidate_region(uint32_t start, uint32_t end)
    164          {
   \                     dcache_clean_invalidate_region:
   \        0x0   0xE92D'4070        PUSH     {R4-R6,LR}
   \        0x4   0xE1B0'4000        MOVS     R4,R0
   \        0x8   0xE1B0'5001        MOVS     R5,R1
    165          	uint32_t mva;
    166          
    167          	assert(start < end);
   \        0xC   0xE154'0005        CMP      R4,R5
   \       0x10   0x3A00'0004        BCC      ??dcache_clean_invalidate_region_0
   \       0x14   0xE3A0'20A7        MOV      R2,#+167
   \       0x18   0x....'....        LDR      R1,??DataTable4
   \       0x1C   0x....'....        LDR      R0,??DataTable4_2
   \       0x20   0x....'....        BL       __aeabi_assert
   \       0x24   0x....'....        BL       __iar_EmptyStepPoint
    168          
    169          	for (mva = start & ~(L1_CACHE_BYTES - 1); mva < end; mva += L1_CACHE_BYTES)
   \                     ??dcache_clean_invalidate_region_0:
   \       0x28   0xE3D4'6007        BICS     R6,R4,#0x7
   \                     ??dcache_clean_invalidate_region_1:
   \       0x2C   0xE156'0005        CMP      R6,R5
   \       0x30   0x2A00'0003        BCS      ??dcache_clean_invalidate_region_2
    170          		cp15_dcache_clean_invalidate_mva(mva);
   \       0x34   0xE1B0'0006        MOVS     R0,R6
   \       0x38   0x....'....        BL       cp15_dcache_clean_invalidate_mva
   \       0x3C   0xE296'6008        ADDS     R6,R6,#+8
   \       0x40   0xEAFF'FFF9        B        ??dcache_clean_invalidate_region_1
    171          
    172          	dsb();
   \                     ??dcache_clean_invalidate_region_2:
   \       0x44   0x....'....        BL       `dsb`
    173          }
   \       0x48   0xE8BD'8070        POP      {R4-R6,PC}       ;; return
    174          

   \                                 In section SOFTPACK, align 4, keep-with-next
    175          void dcache_set_exclusive(void)
    176          {
   \                     dcache_set_exclusive:
   \        0x0   0xE92D'4010        PUSH     {R4,LR}
    177          	uint32_t actlr = cp15_read_actlr();
   \        0x4   0x....'....        BL       cp15_read_actlr
    178          	actlr |= CP15_ACTLR_EXCL;
   \        0x8   0xE390'4080        ORRS     R4,R0,#0x80
    179          	cp15_write_actlr(actlr);
   \        0xC   0xE1B0'0004        MOVS     R0,R4
   \       0x10   0x....'....        BL       cp15_write_actlr
    180          }
   \       0x14   0xE8BD'8010        POP      {R4,PC}          ;; return
    181          

   \                                 In section SOFTPACK, align 4, keep-with-next
    182          void dcache_set_non_exclusive(void)
    183          {
   \                     dcache_set_non_exclusive:
   \        0x0   0xE92D'4010        PUSH     {R4,LR}
    184          	uint32_t actlr = cp15_read_actlr();
   \        0x4   0x....'....        BL       cp15_read_actlr
    185          	actlr &= ~CP15_ACTLR_EXCL;
   \        0x8   0xE3D0'4080        BICS     R4,R0,#0x80
    186          	cp15_write_actlr(actlr);
   \        0xC   0xE1B0'0004        MOVS     R0,R4
   \       0x10   0x....'....        BL       cp15_write_actlr
    187          }
   \       0x14   0xE8BD'8010        POP      {R4,PC}          ;; return

   \                                 In section SOFTPACK, align 4, keep-with-next
   \                     ??DataTable4:
   \        0x0   0x....'....        DC32     ?_1

   \                                 In section SOFTPACK, align 4, keep-with-next
   \                     ??DataTable4_1:
   \        0x0   0x....'....        DC32     ?_0

   \                                 In section SOFTPACK, align 4, keep-with-next
   \                     ??DataTable4_2:
   \        0x0   0x....'....        DC32     ?_2

   \                                 In section .rodata, align 4
   \                     ?_0:
   \        0x0   0x73 0x63          DC8 "sctlr & (1u << 0)"

   \              0x74 0x6C    

   \              0x72 0x20    

   \              0x26 0x20    

   \              0x28 0x31    

   \              0x75 0x20    

   \              0x3C 0x3C    

   \              0x20 0x30    

   \              0x29 0x00
   \       0x12   0x00 0x00          DC8 0, 0

   \                                 In section .rodata, align 4
   \                     ?_1:
   \        0x0   0x43 0x3A          DC8 0x43, 0x3A, 0x5C, 0x77, 0x6F, 0x72, 0x6B, 0x5C

   \              0x5C 0x77    

   \              0x6F 0x72    

   \              0x6B 0x5C
   \        0x8   0x41 0x74          DC8 0x41, 0x74, 0x6D, 0x65, 0x6C, 0x53, 0x6F, 0x66

   \              0x6D 0x65    

   \              0x6C 0x53    

   \              0x6F 0x66
   \       0x10   0x74 0x50          DC8 0x74, 0x50, 0x41, 0x63, 0x6B, 0x5C, 0x61, 0x74

   \              0x41 0x63    

   \              0x6B 0x5C    

   \              0x61 0x74
   \       0x18   0x6D 0x65          DC8 0x6D, 0x65, 0x6C, 0x2D, 0x73, 0x6F, 0x66, 0x74

   \              0x6C 0x2D    

   \              0x73 0x6F    

   \              0x66 0x74
   \       0x20   0x77 0x61          DC8 0x77, 0x61, 0x72, 0x65, 0x2D, 0x70, 0x61, 0x63

   \              0x72 0x65    

   \              0x2D 0x70    

   \              0x61 0x63
   \       0x28   0x6B 0x61          DC8 0x6B, 0x61, 0x67, 0x65, 0x2D, 0x32, 0x2E, 0x31

   \              0x67 0x65    

   \              0x2D 0x32    

   \              0x2E 0x31
   \       0x30   0x37 0x5C          DC8 0x37, 0x5C, 0x61, 0x72, 0x63, 0x68, 0x5C, 0x61

   \              0x61 0x72    

   \              0x63 0x68    

   \              0x5C 0x61
   \       0x38   0x72 0x6D          DC8 0x72, 0x6D, 0x5C, 0x6C, 0x31, 0x63, 0x61, 0x63

   \              0x5C 0x6C    

   \              0x31 0x63    

   \              0x61 0x63
   \       0x40   0x68 0x65          DC8 0x68, 0x65, 0x5F, 0x63, 0x70, 0x31, 0x35, 0x2E

   \              0x5F 0x63    

   \              0x70 0x31    

   \              0x35 0x2E
   \       0x48   0x63 0x00          DC8 0x63, 0
   \       0x4A   0x00 0x00          DC8 0, 0

   \                                 In section .rodata, align 4
   \                     ?_2:
   \        0x0   0x73 0x74          DC8 "start < end"

   \              0x61 0x72    

   \              0x74 0x20    

   \              0x3C 0x20    

   \              0x65 0x6E    

   \              0x64 0x00

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       0   cp15_dcache_clean_invalidate_mva
       0   cp15_dcache_clean_invalidate_setway
       0   cp15_dcache_clean_mva
       0   cp15_dcache_clean_setway
       0   cp15_dcache_invalidate_mva
       0   cp15_dcache_invalidate_setway
       0   cp15_icache_invalidate
       0   cp15_read_actlr
       0   cp15_read_sctlr
       0   cp15_write_actlr
       0   cp15_write_sctlr
      16   dcache_clean
        16   -> cp15_dcache_clean_setway
        16   -> dsb
      16   dcache_clean_invalidate
        16   -> cp15_dcache_clean_invalidate_setway
        16   -> dsb
      16   dcache_clean_invalidate_region
        16   -> __aeabi_assert
        16   -> __iar_EmptyStepPoint
        16   -> cp15_dcache_clean_invalidate_mva
        16   -> dsb
      16   dcache_clean_region
        16   -> __aeabi_assert
        16   -> __iar_EmptyStepPoint
        16   -> cp15_dcache_clean_mva
        16   -> dsb
       8   dcache_disable
         8   -> cp15_read_sctlr
         8   -> cp15_write_sctlr
         8   -> dcache_clean
         8   -> dcache_invalidate
       8   dcache_enable
         8   -> __aeabi_assert
         8   -> __iar_EmptyStepPoint
         8   -> cp15_read_sctlr
         8   -> cp15_write_sctlr
         8   -> dcache_invalidate
      16   dcache_invalidate
        16   -> cp15_dcache_invalidate_setway
        16   -> dsb
      16   dcache_invalidate_region
        16   -> __aeabi_assert
        16   -> __iar_EmptyStepPoint
        16   -> cp15_dcache_invalidate_mva
        16   -> dsb
       8   dcache_is_enabled
         8   -> cp15_read_sctlr
       8   dcache_set_exclusive
         8   -> cp15_read_actlr
         8   -> cp15_write_actlr
       8   dcache_set_non_exclusive
         8   -> cp15_read_actlr
         8   -> cp15_write_actlr
       0   dsb
       8   icache_disable
         8   -> cp15_read_sctlr
         8   -> cp15_write_sctlr
         8   -> icache_invalidate
       8   icache_enable
         8   -> cp15_read_sctlr
         8   -> cp15_write_sctlr
         8   -> icache_invalidate
       8   icache_invalidate
         8   -> cp15_icache_invalidate
         8   -> isb
       8   icache_is_enabled
         8   -> cp15_read_sctlr
       0   isb


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable4
       4  ??DataTable4_1
       4  ??DataTable4_2
      20  ?_0
      76  ?_1
      12  ?_2
       8  cp15_dcache_clean_invalidate_mva
       8  cp15_dcache_clean_invalidate_setway
       8  cp15_dcache_clean_mva
       8  cp15_dcache_clean_setway
       8  cp15_dcache_invalidate_mva
       8  cp15_dcache_invalidate_setway
      12  cp15_icache_invalidate
       8  cp15_read_actlr
       8  cp15_read_sctlr
       8  cp15_write_actlr
       8  cp15_write_sctlr
      68  dcache_clean
      68  dcache_clean_invalidate
      76  dcache_clean_invalidate_region
      76  dcache_clean_region
      40  dcache_disable
      64  dcache_enable
      68  dcache_invalidate
      76  dcache_invalidate_region
      40  dcache_is_enabled
      24  dcache_set_exclusive
      24  dcache_set_non_exclusive
      12  dsb
      36  icache_disable
      36  icache_enable
      16  icache_invalidate
      20  icache_is_enabled
       4  isb

 
 108 bytes in section .rodata
 852 bytes in section SOFTPACK
 
 852 bytes of CODE  memory
 108 bytes of CONST memory

Errors: none
Warnings: none
