###############################################################################
#
# IAR ANSI C/C++ Compiler V8.50.1.245/W32 for ARM         06/May/2020  06:12:22
# Copyright 1999-2020 IAR Systems AB.
#
#    Cpu mode             
#    Endian            =  little
#    Source file       =
#        C:\work\AtmelSoftPAck\atmel-software-package-2.17\drivers\peripherals\matrix.c
#    Command line      =
#        -f C:\Users\c40450\AppData\Local\Temp\EW3F89.tmp
#        (C:\work\AtmelSoftPAck\atmel-software-package-2.17\drivers\peripherals\matrix.c
#        -D "SOFTPACK_VERSION=\"2.17\"" -D TRACE_LEVEL=5 -D VARIANT_SRAM -D
#        CONFIG_ARCH_ARMV7A -D CONFIG_ARCH_ARM -D CONFIG_SOC_SAMA5D2 -D
#        CONFIG_CHIP_SAMA5D27 -D CONFIG_PACKAGE_289PIN -D
#        CONFIG_BOARD_SAMA5D27_SOM1_EK -D CONFIG_HAVE_AIC5 -D
#        CONFIG_HAVE_FLEXCOM -D CONFIG_HAVE_PIO4 -D CONFIG_HAVE_PIO4_SECURE -D
#        CONFIG_HAVE_NFC -D CONFIG_HAVE_PIT -D CONFIG_HAVE_SMC -D
#        CONFIG_HAVE_SMC_SCRAMBLING -D CONFIG_HAVE_GMAC_QUEUES -D
#        CONFIG_HAVE_MPDDRC -D CONFIG_HAVE_MPDDRC_DATA_PATH -D
#        CONFIG_HAVE_MPDDRC_IO_CALIBRATION -D CONFIG_HAVE_MPDDRC_DDR2 -D
#        CONFIG_HAVE_MPDDRC_LPDDR2 -D CONFIG_HAVE_MPDDRC_DDR3 -D
#        CONFIG_HAVE_MPDDRC_LPDDR3 -D CONFIG_HAVE_ADC_SETTLING_TIME -D
#        CONFIG_HAVE_ADC_DIFF_INPUT -D CONFIG_HAVE_ADC_SEQ_R2 -D
#        CONFIG_HAVE_PMC_FAST_STARTUP -D CONFIG_HAVE_PMC_GENERATED_CLOCKS -D
#        CONFIG_HAVE_PMC_AUDIO_CLOCK -D CONFIG_HAVE_PMC_PLLADIV2 -D
#        CONFIG_HAVE_PMC_H32MXDIV -D CONFIG_HAVE_PMC_UPLL_BIAS -D
#        CONFIG_HAVE_SCKC -D CONFIG_HAVE_PWMC_DMA -D
#        CONFIG_HAVE_PWMC_SPREAD_SPECTRUM -D CONFIG_HAVE_PWMC_EXTERNAL_TRIGGER
#        -D CONFIG_HAVE_PWMC_FAULT_PROT_HIZ -D CONFIG_HAVE_PWMC_STEPPER_MOTOR
#        -D CONFIG_HAVE_PWMC_CMP_UNIT -D CONFIG_HAVE_PWMC_SYNC_MODE -D
#        CONFIG_HAVE_PWMC_OOV -D CONFIG_HAVE_PWMC_FMODE -D CONFIG_HAVE_PWMC_WP
#        -D CONFIG_HAVE_PWMC_DTIME -D CONFIG_HAVE_PWMC_ELINE -D
#        CONFIG_HAVE_SFRBU -D CONFIG_HAVE_L2CC -D CONFIG_HAVE_SAIC -D
#        CONFIG_HAVE_XDMAC -D CONFIG_HAVE_XDMAC_DATA_WIDTH_DWORD -D
#        CONFIG_HAVE_SECUMOD -D CONFIG_HAVE_SFC -D CONFIG_HAVE_PWMC -D
#        CONFIG_HAVE_SECURE_MATRIX -D CONFIG_HAVE_DDR2_W971GG6SB -D
#        CONFIG_HAVE_RSTC_CONFIGURABLE_USER_RESET -D CONFIG_HAVE_TC_FAULT_MODE
#        -D CONFIG_HAVE_TC_DMA_MODE -D CONFIG_HAVE_RTC_CALIBRATION -D
#        CONFIG_HAVE_RTC_MODE_PERSIAN -D CONFIG_HAVE_RTC_MODE_UTC -D
#        CONFIG_HAVE_RTC_TAMPER -D CONFIG_HAVE_SHDWC -D CONFIG_HAVE_LED -D
#        CONFIG_HAVE_MMU -D CONFIG_HAVE_L1CACHE -D CONFIG_HAVE_L2CACHE -D
#        CONFIG_HAVE_UART -D CONFIG_HAVE_SERIALD_UART -D CONFIG_HAVE_USART -D
#        CONFIG_HAVE_USART_FIFO --preprocess
#        C:\work\AtmelSoftPAck\atmel-software-package-2.17\examples\coremark\build\sama5d27-som1-ek\sram\List
#        -lC
#        C:\work\AtmelSoftPAck\atmel-software-package-2.17\examples\coremark\build\sama5d27-som1-ek\sram\List
#        --diag_suppress Pa050 -o
#        C:\work\AtmelSoftPAck\atmel-software-package-2.17\examples\coremark\build\sama5d27-som1-ek\sram\Obj
#        --no_cse --no_unroll --no_inline --no_code_motion --no_tbaa
#        --no_clustering --no_scheduling --debug --endian=little
#        --cpu=Cortex-A5 -e --fpu=VFPv4_D16 --dlib_config "C:\Program Files
#        (x86)\IAR Systems\Embedded Workbench
#        8.4\arm\inc\c\DLib_Config_Normal.h" -I
#        C:\work\AtmelSoftPAck\atmel-software-package-2.17\examples\coremark\..\..\arch\
#        -I
#        C:\work\AtmelSoftPAck\atmel-software-package-2.17\examples\coremark\..\..\utils\
#        -I
#        C:\work\AtmelSoftPAck\atmel-software-package-2.17\examples\coremark\..\..\target\common\
#        -I
#        C:\work\AtmelSoftPAck\atmel-software-package-2.17\examples\coremark\..\..\target\sama5d2\
#        -I
#        C:\work\AtmelSoftPAck\atmel-software-package-2.17\examples\coremark\..\..\drivers\
#        -I
#        C:\work\AtmelSoftPAck\atmel-software-package-2.17\examples\coremark\..\..\lib\
#        -I
#        C:\work\AtmelSoftPAck\atmel-software-package-2.17\examples\coremark\coremark\
#        --section .text=SOFTPACK --cpu_mode arm -On)
#    Locale            =  C
#    List file         =
#        C:\work\AtmelSoftPAck\atmel-software-package-2.17\examples\coremark\build\sama5d27-som1-ek\sram\List\matrix.lst
#    Object file       =
#        C:\work\AtmelSoftPAck\atmel-software-package-2.17\examples\coremark\build\sama5d27-som1-ek\sram\Obj\matrix.o
#    Runtime model:       
#      __SystemLibrary =  DLib
#      __dlib_version  =  6
#
###############################################################################

C:\work\AtmelSoftPAck\atmel-software-package-2.17\drivers\peripherals\matrix.c
      1          /* ----------------------------------------------------------------------------
      2           *         SAM Software Package License
      3           * ----------------------------------------------------------------------------
      4           * Copyright (c) 2015, Atmel Corporation
      5           *
      6           * All rights reserved.
      7           *
      8           * Redistribution and use in source and binary forms, with or without
      9           * modification, are permitted provided that the following conditions are met:
     10           *
     11           * - Redistributions of source code must retain the above copyright notice,
     12           * this list of conditions and the disclaimer below.
     13           *
     14           * Atmel's name may not be used to endorse or promote products derived from
     15           * this software without specific prior written permission.
     16           *
     17           * DISCLAIMER: THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR
     18           * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
     19           * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
     20           * DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR ANY DIRECT, INDIRECT,
     21           * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
     22           * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
     23           * OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
     24           * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
     25           * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
     26           * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
     27           * ----------------------------------------------------------------------------
     28           */
     29          
     30          #include "chip.h"
     31          
     32          #include "peripherals/matrix.h"
     33          
     34          #include "mm/cache.h"
     35          #include "mm/l1cache.h"
     36          
     37          #include <assert.h>
     38          
     39          #if defined(CONFIG_SOC_SAMA5D2) || defined(CONFIG_SOC_SAMA5D4)

   \                                 In section SOFTPACK, align 4, keep-with-next
     40          void matrix_configure_master(Matrix* mtx, uint8_t id, uint32_t val)
     41          {
     42          	mtx->MATRIX_MCFG[id] = val;
   \                     matrix_configure_master:
   \        0x0   0xE1B0'3001        MOVS     R3,R1
   \        0x4   0xE6EF'3073        UXTB     R3,R3
   \        0x8   0xE1B0'3103        LSLS     R3,R3,#+2
   \        0xC   0xE780'2003        STR      R2,[R0, +R3]
     43          }
   \       0x10   0xE12F'FF1E        BX       LR               ;; return
     44          

   \                                 In section SOFTPACK, align 4, keep-with-next
     45          void matrix_configure_slave(Matrix* mtx, uint8_t id, uint32_t val)
     46          {
     47          	mtx->MATRIX_SCFG[id] = val;
   \                     matrix_configure_slave:
   \        0x0   0xE1B0'3001        MOVS     R3,R1
   \        0x4   0xE6EF'3073        UXTB     R3,R3
   \        0x8   0xE1B0'3103        LSLS     R3,R3,#+2
   \        0xC   0xE090'3003        ADDS     R3,R0,R3
   \       0x10   0xE583'2040        STR      R2,[R3, #+64]
     48          }
   \       0x14   0xE12F'FF1E        BX       LR               ;; return
     49          

   \                                 In section SOFTPACK, align 4, keep-with-next
     50          void matrix_master_priority_for_slave(Matrix* mtx,
     51          	uint8_t s_id, uint8_t m_id, uint8_t priority)
     52          {
   \                     matrix_master_priority_for_slave:
   \        0x0   0xE92D'40F8        PUSH     {R3-R7,LR}
   \        0x4   0xE1B0'4000        MOVS     R4,R0
   \        0x8   0xE1B0'5001        MOVS     R5,R1
   \        0xC   0xE1B0'7002        MOVS     R7,R2
   \       0x10   0xE1B0'6003        MOVS     R6,R3
     53          	if (m_id <= 7) {
   \       0x14   0xE1B0'0007        MOVS     R0,R7
   \       0x18   0xE6EF'0070        UXTB     R0,R0
   \       0x1C   0xE350'0008        CMP      R0,#+8
   \       0x20   0xAA00'0011        BGE      ??matrix_master_priority_for_slave_0
     54          		m_id <<= 2;
   \       0x24   0xE1B0'0107        LSLS     R0,R7,#+2
     55          		mtx->MATRIX_PR[s_id].MATRIX_PRAS = (mtx->MATRIX_PR[s_id].MATRIX_PRAS &
     56          			(~(MATRIX_PRAS_M0PR_Msk << m_id))) | (priority << m_id);
   \       0x28   0xE1B0'1005        MOVS     R1,R5
   \       0x2C   0xE6EF'1071        UXTB     R1,R1
   \       0x30   0xE1B0'1181        LSLS     R1,R1,#+3
   \       0x34   0xE094'1001        ADDS     R1,R4,R1
   \       0x38   0xE591'1080        LDR      R1,[R1, #+128]
   \       0x3C   0xE3A0'2003        MOV      R2,#+3
   \       0x40   0xE1F0'2012        MVNS     R2,R2, LSL R0
   \       0x44   0xE012'1001        ANDS     R1,R2,R1
   \       0x48   0xE1B0'2006        MOVS     R2,R6
   \       0x4C   0xE6EF'2072        UXTB     R2,R2
   \       0x50   0xE191'1012        ORRS     R1,R1,R2, LSL R0
   \       0x54   0xE1B0'2005        MOVS     R2,R5
   \       0x58   0xE6EF'2072        UXTB     R2,R2
   \       0x5C   0xE1B0'2182        LSLS     R2,R2,#+3
   \       0x60   0xE094'2002        ADDS     R2,R4,R2
   \       0x64   0xE582'1080        STR      R1,[R2, #+128]
   \       0x68   0xEA00'001A        B        ??matrix_master_priority_for_slave_1
     57          	} else {
     58          		assert(m_id < 16);
   \                     ??matrix_master_priority_for_slave_0:
   \       0x6C   0xE1B0'0007        MOVS     R0,R7
   \       0x70   0xE6EF'0070        UXTB     R0,R0
   \       0x74   0xE350'0010        CMP      R0,#+16
   \       0x78   0xBA00'0004        BLT      ??matrix_master_priority_for_slave_2
   \       0x7C   0xE3A0'203A        MOV      R2,#+58
   \       0x80   0x....'....        LDR      R1,??DataTable3
   \       0x84   0x....'....        LDR      R0,??DataTable3_1
   \       0x88   0x....'....        BL       __aeabi_assert
   \       0x8C   0x....'....        BL       __iar_EmptyStepPoint
     59          		m_id = (m_id - 8) << 2;
   \                     ??matrix_master_priority_for_slave_2:
   \       0x90   0xE257'0008        SUBS     R0,R7,#+8
   \       0x94   0xE1B0'0100        LSLS     R0,R0,#+2
     60          		mtx->MATRIX_PR[s_id].MATRIX_PRBS = (mtx->MATRIX_PR[s_id].MATRIX_PRBS &
     61          			(~(MATRIX_PRAS_M0PR_Msk << m_id))) | (priority << m_id);
   \       0x98   0xE1B0'1005        MOVS     R1,R5
   \       0x9C   0xE6EF'1071        UXTB     R1,R1
   \       0xA0   0xE1B0'1181        LSLS     R1,R1,#+3
   \       0xA4   0xE094'1001        ADDS     R1,R4,R1
   \       0xA8   0xE591'1084        LDR      R1,[R1, #+132]
   \       0xAC   0xE3A0'2003        MOV      R2,#+3
   \       0xB0   0xE1F0'2012        MVNS     R2,R2, LSL R0
   \       0xB4   0xE012'1001        ANDS     R1,R2,R1
   \       0xB8   0xE1B0'2006        MOVS     R2,R6
   \       0xBC   0xE6EF'2072        UXTB     R2,R2
   \       0xC0   0xE191'1012        ORRS     R1,R1,R2, LSL R0
   \       0xC4   0xE1B0'2005        MOVS     R2,R5
   \       0xC8   0xE6EF'2072        UXTB     R2,R2
   \       0xCC   0xE1B0'2182        LSLS     R2,R2,#+3
   \       0xD0   0xE094'2002        ADDS     R2,R4,R2
   \       0xD4   0xE582'1084        STR      R1,[R2, #+132]
     62          	}
     63          }
   \                     ??matrix_master_priority_for_slave_1:
   \       0xD8   0xE8BD'80F1        POP      {R0,R4-R7,PC}    ;; return
     64          #endif
     65          

   \                                 In section SOFTPACK, align 4, keep-with-next
     66          void matrix_configure_slave_sec(Matrix* mtx, uint8_t slave_id,
     67          				uint8_t sel_mask, uint8_t read_mask,
     68          				uint8_t write_mask)
     69          {
   \                     matrix_configure_slave_sec:
   \        0x0   0xE92D'4010        PUSH     {R4,LR}
   \        0x4   0xE5DD'C008        LDRB     R12,[SP, #+8]
     70          #ifdef CONFIG_HAVE_SECURE_MATRIX
     71          	mtx->MATRIX_SSR[slave_id] = sel_mask | (read_mask << 8) |
     72          		(write_mask << 16);
   \        0x8   0xE1B0'E002        MOVS     LR,R2
   \        0xC   0xE6EF'E07E        UXTB     LR,LR
   \       0x10   0xE1B0'4003        MOVS     R4,R3
   \       0x14   0xE6EF'4074        UXTB     R4,R4
   \       0x18   0xE19E'E404        ORRS     LR,LR,R4, LSL #+8
   \       0x1C   0xE1B0'400C        MOVS     R4,R12
   \       0x20   0xE6EF'4074        UXTB     R4,R4
   \       0x24   0xE19E'E804        ORRS     LR,LR,R4, LSL #+16
   \       0x28   0xE1B0'4001        MOVS     R4,R1
   \       0x2C   0xE6EF'4074        UXTB     R4,R4
   \       0x30   0xE1B0'4104        LSLS     R4,R4,#+2
   \       0x34   0xE090'4004        ADDS     R4,R0,R4
   \       0x38   0xE584'E200        STR      LR,[R4, #+512]
     73          #endif
     74          }
   \       0x3C   0xE8BD'8010        POP      {R4,PC}          ;; return
     75          

   \                                 In section SOFTPACK, align 4, keep-with-next
     76          void matrix_set_slave_split_addr(Matrix* mtx, uint8_t slave_id,
     77          				 uint8_t area_size, uint8_t mask)
     78          {
   \                     matrix_set_slave_split_addr:
   \        0x0   0xE92D'4070        PUSH     {R4-R6,LR}
     79          #ifdef CONFIG_HAVE_SECURE_MATRIX
     80          	uint8_t i = mask, j = 0;
   \        0x4   0xE1B0'5003        MOVS     R5,R3
   \        0x8   0xE3A0'4000        MOV      R4,#+0
     81          	uint32_t value = 0;
   \        0xC   0xE3A0'C000        MOV      R12,#+0
     82          	for (i = 1; (i <= mask) && (j < 32); i <<= 1, j += 4) {
   \       0x10   0xE3A0'E001        MOV      LR,#+1
   \                     ??matrix_set_slave_split_addr_0:
   \       0x14   0xE1B0'5003        MOVS     R5,R3
   \       0x18   0xE1B0'600E        MOVS     R6,LR
   \       0x1C   0xE6EF'5075        UXTB     R5,R5
   \       0x20   0xE6EF'6076        UXTB     R6,R6
   \       0x24   0xE155'0006        CMP      R5,R6
   \       0x28   0x3A00'000D        BCC      ??matrix_set_slave_split_addr_1
   \       0x2C   0xE1B0'5004        MOVS     R5,R4
   \       0x30   0xE6EF'5075        UXTB     R5,R5
   \       0x34   0xE355'0020        CMP      R5,#+32
   \       0x38   0xAA00'0009        BGE      ??matrix_set_slave_split_addr_1
     83          		if (i & mask)
   \       0x3C   0xE1B0'5003        MOVS     R5,R3
   \       0x40   0xE6EF'5075        UXTB     R5,R5
   \       0x44   0xE115'000E        TST      R5,LR
   \       0x48   0x0A00'0002        BEQ      ??matrix_set_slave_split_addr_2
     84          			value |= area_size << j;
   \       0x4C   0xE1B0'5002        MOVS     R5,R2
   \       0x50   0xE6EF'5075        UXTB     R5,R5
   \       0x54   0xE19C'C415        ORRS     R12,R12,R5, LSL R4
     85          	}
   \                     ??matrix_set_slave_split_addr_2:
   \       0x58   0xE1B0'E08E        LSLS     LR,LR,#+1
   \       0x5C   0xE294'4004        ADDS     R4,R4,#+4
   \       0x60   0xEAFF'FFEB        B        ??matrix_set_slave_split_addr_0
     86          	mtx->MATRIX_SASSR[slave_id] = value;
   \                     ??matrix_set_slave_split_addr_1:
   \       0x64   0xE1B0'5001        MOVS     R5,R1
   \       0x68   0xE6EF'5075        UXTB     R5,R5
   \       0x6C   0xE1B0'5105        LSLS     R5,R5,#+2
   \       0x70   0xE090'5005        ADDS     R5,R0,R5
   \       0x74   0xE585'C240        STR      R12,[R5, #+576]
     87          #endif
     88          }
   \       0x78   0xE8BD'8070        POP      {R4-R6,PC}       ;; return
     89          

   \                                 In section SOFTPACK, align 4, keep-with-next
     90          void matrix_set_slave_region_size(Matrix* mtx, uint8_t slave_id,
     91          				  uint8_t area_size, uint8_t mask)
     92          {
   \                     matrix_set_slave_region_size:
   \        0x0   0xE92D'40F8        PUSH     {R3-R7,LR}
   \        0x4   0xE1B0'4000        MOVS     R4,R0
   \        0x8   0xE1B0'5001        MOVS     R5,R1
   \        0xC   0xE1B0'6002        MOVS     R6,R2
   \       0x10   0xE1B0'7003        MOVS     R7,R3
     93          #ifdef CONFIG_HAVE_SECURE_MATRIX
     94          	assert(slave_id != 0);
   \       0x14   0xE1B0'0005        MOVS     R0,R5
   \       0x18   0xE6EF'0070        UXTB     R0,R0
   \       0x1C   0xE350'0000        CMP      R0,#+0
   \       0x20   0x1A00'0004        BNE      ??matrix_set_slave_region_size_0
   \       0x24   0xE3A0'205E        MOV      R2,#+94
   \       0x28   0x....'....        LDR      R1,??DataTable3
   \       0x2C   0x....'....        LDR      R0,??DataTable3_2
   \       0x30   0x....'....        BL       __aeabi_assert
   \       0x34   0x....'....        BL       __iar_EmptyStepPoint
     95          	uint8_t i = mask, j = 0;
   \                     ??matrix_set_slave_region_size_0:
   \       0x38   0xE1B0'3007        MOVS     R3,R7
   \       0x3C   0xE3A0'2000        MOV      R2,#+0
   \       0x40   0xE1B0'1002        MOVS     R1,R2
     96          	uint32_t value = 0;
   \       0x44   0xE1B0'0002        MOVS     R0,R2
     97          	for (i = 1; (i <= mask) && (j < 32 ); i <<= 1, j += 4) {
   \       0x48   0xE3A0'2001        MOV      R2,#+1
   \                     ??matrix_set_slave_region_size_1:
   \       0x4C   0xE1B0'3007        MOVS     R3,R7
   \       0x50   0xE1B0'C002        MOVS     R12,R2
   \       0x54   0xE6EF'3073        UXTB     R3,R3
   \       0x58   0xE6EF'C07C        UXTB     R12,R12
   \       0x5C   0xE153'000C        CMP      R3,R12
   \       0x60   0x3A00'000D        BCC      ??matrix_set_slave_region_size_2
   \       0x64   0xE1B0'3001        MOVS     R3,R1
   \       0x68   0xE6EF'3073        UXTB     R3,R3
   \       0x6C   0xE353'0020        CMP      R3,#+32
   \       0x70   0xAA00'0009        BGE      ??matrix_set_slave_region_size_2
     98          		if (i & mask)
   \       0x74   0xE1B0'3007        MOVS     R3,R7
   \       0x78   0xE6EF'3073        UXTB     R3,R3
   \       0x7C   0xE113'0002        TST      R3,R2
   \       0x80   0x0A00'0002        BEQ      ??matrix_set_slave_region_size_3
     99          			value |= area_size << j;
   \       0x84   0xE1B0'3006        MOVS     R3,R6
   \       0x88   0xE6EF'3073        UXTB     R3,R3
   \       0x8C   0xE190'0113        ORRS     R0,R0,R3, LSL R1
    100          	}
   \                     ??matrix_set_slave_region_size_3:
   \       0x90   0xE1B0'2082        LSLS     R2,R2,#+1
   \       0x94   0xE291'1004        ADDS     R1,R1,#+4
   \       0x98   0xEAFF'FFEB        B        ??matrix_set_slave_region_size_1
    101          	mtx->MATRIX_SRTSR[slave_id] = value;
   \                     ??matrix_set_slave_region_size_2:
   \       0x9C   0xE1B0'3005        MOVS     R3,R5
   \       0xA0   0xE6EF'3073        UXTB     R3,R3
   \       0xA4   0xE1B0'3103        LSLS     R3,R3,#+2
   \       0xA8   0xE094'3003        ADDS     R3,R4,R3
   \       0xAC   0xE583'0280        STR      R0,[R3, #+640]
    102          #endif
    103          }
   \       0xB0   0xE8BD'80F1        POP      {R0,R4-R7,PC}    ;; return
    104          

   \                                 In section SOFTPACK, align 4, keep-with-next
    105          bool matrix_is_peripheral_secured(Matrix* mtx, uint32_t periph_id)
    106          {
   \                     matrix_is_peripheral_secured:
   \        0x0   0xE1B0'2000        MOVS     R2,R0
    107          #ifdef CONFIG_HAVE_SECURE_MATRIX
    108          	if (mtx->MATRIX_SPSELR[periph_id / 32] & (1 << (periph_id % 32))) {
   \        0x4   0xE1B0'02A1        LSRS     R0,R1,#+5
   \        0x8   0xE1B0'0100        LSLS     R0,R0,#+2
   \        0xC   0xE092'0000        ADDS     R0,R2,R0
   \       0x10   0xE590'02C0        LDR      R0,[R0, #+704]
   \       0x14   0xE1B0'3001        MOVS     R3,R1
   \       0x18   0xE213'301F        ANDS     R3,R3,#0x1F
   \       0x1C   0xE3A0'C001        MOV      R12,#+1
   \       0x20   0xE11C'0330        TST      R12,R0, LSR R3
   \       0x24   0x0A00'0001        BEQ      ??matrix_is_peripheral_secured_0
    109          		return false;
   \       0x28   0xE3A0'0000        MOV      R0,#+0
   \       0x2C   0xEA00'0000        B        ??matrix_is_peripheral_secured_1
    110          	} else
    111          #endif
    112          	{
    113          		return true;
   \                     ??matrix_is_peripheral_secured_0:
   \       0x30   0xE3A0'0001        MOV      R0,#+1
   \                     ??matrix_is_peripheral_secured_1:
   \       0x34   0xE12F'FF1E        BX       LR               ;; return
    114          	}
    115          }
    116          

   \                                 In section SOFTPACK, align 4, keep-with-next
    117          void matrix_remove_write_protection(Matrix* mtx)
    118          {
    119          	mtx->MATRIX_WPMR = MATRIX_WPMR_WPKEY_PASSWD;
   \                     matrix_remove_write_protection:
   \        0x0   0x....'....        LDR      R1,??DataTable3_3  ;; 0x4d415400
   \        0x4   0xE580'11E4        STR      R1,[R0, #+484]
    120          }
   \        0x8   0xE12F'FF1E        BX       LR               ;; return
    121          
    122          /**
    123           * \brief Changes the mapping of the chip so that the remap area mirrors the
    124           * internal ROM or the EBI CS0.
    125           */

   \                                 In section SOFTPACK, align 4, keep-with-next
    126          void matrix_remap_rom(void)
    127          {
   \                     matrix_remap_rom:
   \        0x0   0xE92D'5000        PUSH     {R12,LR}
    128          	volatile int i;
    129          #if defined(CONFIG_SOC_SAM9XX5) || defined(CONFIG_SOC_SAM9X60)
    130          	MATRIX->MATRIX_MRCR = 0;
    131          #elif defined(CONFIG_SOC_SAMA5D3)
    132          	MATRIX->MATRIX_MRCR = 0;
    133          	AXIMX->AXIMX_REMAP = 0;
    134          #elif defined(CONFIG_SOC_SAMA5D2) || defined(CONFIG_SOC_SAMA5D4)
    135          	AXIMX->AXIMX_REMAP = 0;
   \        0x4   0xE3A0'0000        MOV      R0,#+0
   \        0x8   0xE3A0'1860        MOV      R1,#+6291456
   \        0xC   0xE581'0000        STR      R0,[R1, #+0]
    136          #endif
    137          	for (i = 200; i--; ) {}
   \       0x10   0xE3A0'00C8        MOV      R0,#+200
   \       0x14   0xE58D'0000        STR      R0,[SP, #+0]
   \                     ??matrix_remap_rom_0:
   \       0x18   0xE59D'0000        LDR      R0,[SP, #+0]
   \       0x1C   0xE250'1001        SUBS     R1,R0,#+1
   \       0x20   0xE58D'1000        STR      R1,[SP, #+0]
   \       0x24   0xE350'0000        CMP      R0,#+0
   \       0x28   0x1AFF'FFFA        BNE      ??matrix_remap_rom_0
    138          	icache_invalidate();
   \       0x2C   0x....'....        BL       icache_invalidate
    139          
    140          	/* If caching is enabled, invalidate the remap area */
    141          	cache_invalidate_region((void*)0, IRAM_SIZE);
   \       0x30   0xE3A0'1B80        MOV      R1,#+131072
   \       0x34   0xE3A0'0000        MOV      R0,#+0
   \       0x38   0x....'....        BL       cache_invalidate_region
    142          }
   \       0x3C   0xE8BD'8001        POP      {R0,PC}          ;; return
    143          
    144          /**
    145           * \brief Changes the mapping of the chip so that the remap area mirrors the
    146           * internal RAM.
    147           */
    148          

   \                                 In section SOFTPACK, align 4, keep-with-next
    149          void matrix_remap_ram(void)
    150          {
   \                     matrix_remap_ram:
   \        0x0   0xE92D'5000        PUSH     {R12,LR}
    151          	volatile int i;
    152          #if defined(CONFIG_SOC_SAM9XX5) || defined(CONFIG_SOC_SAM9X60)
    153          	MATRIX->MATRIX_MRCR = MATRIX_MRCR_RCB0 | MATRIX_MRCR_RCB1;
    154          #elif defined(CONFIG_SOC_SAMA5D3)
    155          	MATRIX->MATRIX_MRCR = MATRIX_MRCR_RCB0;
    156          	AXIMX->AXIMX_REMAP = AXIMX_REMAP_REMAP0;
    157          #elif defined(CONFIG_SOC_SAMA5D2) || defined(CONFIG_SOC_SAMA5D4)
    158          	AXIMX->AXIMX_REMAP = AXIMX_REMAP_REMAP0;
   \        0x4   0xE3A0'0001        MOV      R0,#+1
   \        0x8   0xE3A0'1860        MOV      R1,#+6291456
   \        0xC   0xE581'0000        STR      R0,[R1, #+0]
    159          #endif
    160          	for (i = 200; i--; ) {}
   \       0x10   0xE3A0'00C8        MOV      R0,#+200
   \       0x14   0xE58D'0000        STR      R0,[SP, #+0]
   \                     ??matrix_remap_ram_0:
   \       0x18   0xE59D'0000        LDR      R0,[SP, #+0]
   \       0x1C   0xE250'1001        SUBS     R1,R0,#+1
   \       0x20   0xE58D'1000        STR      R1,[SP, #+0]
   \       0x24   0xE350'0000        CMP      R0,#+0
   \       0x28   0x1AFF'FFFA        BNE      ??matrix_remap_ram_0
    161          	icache_invalidate();
   \       0x2C   0x....'....        BL       icache_invalidate
    162          
    163          	/* If caching is enabled, clean the SRAM region and invalidate remap
    164          	 * area */
    165          	cache_clean_region((void*)IRAM_ADDR, IRAM_SIZE);
   \       0x30   0xE3A0'1B80        MOV      R1,#+131072
   \       0x34   0xE3A0'0980        MOV      R0,#+2097152
   \       0x38   0x....'....        BL       cache_clean_region
    166          	cache_invalidate_region((void*)0, IRAM_SIZE);
   \       0x3C   0xE3A0'1B80        MOV      R1,#+131072
   \       0x40   0xE3A0'0000        MOV      R0,#+0
   \       0x44   0x....'....        BL       cache_invalidate_region
    167          }
   \       0x48   0xE8BD'8001        POP      {R0,PC}          ;; return
    168          
    169          #if defined(CONFIG_SOC_SAMA5D2) || defined(CONFIG_SOC_SAMA5D4)

   \                                 In section SOFTPACK, align 4, keep-with-next
    170          void matrix_set_default_config(void)
    171          {
   \                     matrix_set_default_config:
   \        0x0   0xE92D'40F8        PUSH     {R3-R7,LR}
    172          	uint32_t m_id;
    173          	uint32_t s_id;
    174          
    175          	/* Disable write protection */
    176          	matrix_remove_write_protection(MATRIX0);
   \        0x4   0xE3A0'54F0        MOV      R5,#-268435456
   \        0x8   0xE385'5B60        ORR      R5,R5,#0x18000
   \        0xC   0xE1B0'0005        MOVS     R0,R5
   \       0x10   0x....'....        BL       matrix_remove_write_protection
    177          
    178          	for (m_id = 0; m_id < H64MX_MASTER_COUNT; m_id++)
   \       0x14   0xE3A0'4000        MOV      R4,#+0
   \                     ??matrix_set_default_config_0:
   \       0x18   0xE354'000C        CMP      R4,#+12
   \       0x1C   0x2A00'0006        BCS      ??matrix_set_default_config_1
    179          		matrix_configure_master(MATRIX0, m_id, MATRIX_MCFG_ULBT_16_BEAT);
   \       0x20   0xE3A0'2004        MOV      R2,#+4
   \       0x24   0xE1B0'1004        MOVS     R1,R4
   \       0x28   0xE6EF'1071        UXTB     R1,R1
   \       0x2C   0xE1B0'0005        MOVS     R0,R5
   \       0x30   0x....'....        BL       matrix_configure_master
   \       0x34   0xE294'4001        ADDS     R4,R4,#+1
   \       0x38   0xEAFF'FFF6        B        ??matrix_set_default_config_0
    180          
    181          	for (s_id = 0; s_id < H64MX_SLAVE_COUNT; s_id++) {
   \                     ??matrix_set_default_config_1:
   \       0x3C   0xE3A0'6000        MOV      R6,#+0
   \                     ??matrix_set_default_config_2:
   \       0x40   0xE356'000F        CMP      R6,#+15
   \       0x44   0x2A00'001B        BCS      ??matrix_set_default_config_3
    182          		matrix_configure_slave(MATRIX0, s_id, MATRIX_SCFG_FIXED_DEFMSTR(0) |
    183          			MATRIX_SCFG_DEFMSTR_TYPE_NONE | MATRIX_SCFG_SLOT_CYCLE_Msk);
   \       0x48   0xE300'21FF        MOVW     R2,#+511
   \       0x4C   0xE1B0'1006        MOVS     R1,R6
   \       0x50   0xE6EF'1071        UXTB     R1,R1
   \       0x54   0xE1B0'0005        MOVS     R0,R5
   \       0x58   0x....'....        BL       matrix_configure_slave
    184          		for (m_id = 0; m_id < H64MX_MASTER_COUNT; m_id++)
   \       0x5C   0xE3A0'0000        MOV      R0,#+0
   \       0x60   0xE1B0'4000        MOVS     R4,R0
   \                     ??matrix_set_default_config_4:
   \       0x64   0xE354'000C        CMP      R4,#+12
   \       0x68   0x2A00'0008        BCS      ??matrix_set_default_config_5
    185          			matrix_master_priority_for_slave(MATRIX0, s_id, m_id, 0);
   \       0x6C   0xE3A0'3000        MOV      R3,#+0
   \       0x70   0xE1B0'2004        MOVS     R2,R4
   \       0x74   0xE6EF'2072        UXTB     R2,R2
   \       0x78   0xE1B0'1006        MOVS     R1,R6
   \       0x7C   0xE6EF'1071        UXTB     R1,R1
   \       0x80   0xE1B0'0005        MOVS     R0,R5
   \       0x84   0x....'....        BL       matrix_master_priority_for_slave
   \       0x88   0xE294'4001        ADDS     R4,R4,#+1
   \       0x8C   0xEAFF'FFF4        B        ??matrix_set_default_config_4
    186          		matrix_configure_slave_sec(MATRIX0, s_id, 0xFF, 0xFF, 0xFF);
   \                     ??matrix_set_default_config_5:
   \       0x90   0xE3A0'00FF        MOV      R0,#+255
   \       0x94   0xE58D'0000        STR      R0,[SP, #+0]
   \       0x98   0xE3A0'30FF        MOV      R3,#+255
   \       0x9C   0xE3A0'20FF        MOV      R2,#+255
   \       0xA0   0xE1B0'1006        MOVS     R1,R6
   \       0xA4   0xE6EF'1071        UXTB     R1,R1
   \       0xA8   0xE1B0'0005        MOVS     R0,R5
   \       0xAC   0x....'....        BL       matrix_configure_slave_sec
    187          	}
   \       0xB0   0xE296'6001        ADDS     R6,R6,#+1
   \       0xB4   0xEAFF'FFE1        B        ??matrix_set_default_config_2
    188          
    189          	/* Disable write protection */
    190          	matrix_remove_write_protection(MATRIX1);
   \                     ??matrix_set_default_config_3:
   \       0xB8   0xE3A0'74FC        MOV      R7,#-67108864
   \       0xBC   0xE387'7BF0        ORR      R7,R7,#0x3C000
   \       0xC0   0xE1B0'0007        MOVS     R0,R7
   \       0xC4   0x....'....        BL       matrix_remove_write_protection
    191          
    192          	for (m_id = 0; m_id <= H32MX_MASTER_COUNT; m_id++)
   \       0xC8   0xE3A0'5000        MOV      R5,#+0
   \                     ??matrix_set_default_config_6:
   \       0xCC   0xE355'0009        CMP      R5,#+9
   \       0xD0   0x2A00'0006        BCS      ??matrix_set_default_config_7
    193          		matrix_configure_master(MATRIX1, m_id, MATRIX_MCFG_ULBT_16_BEAT);
   \       0xD4   0xE3A0'2004        MOV      R2,#+4
   \       0xD8   0xE1B0'1005        MOVS     R1,R5
   \       0xDC   0xE6EF'1071        UXTB     R1,R1
   \       0xE0   0xE1B0'0007        MOVS     R0,R7
   \       0xE4   0x....'....        BL       matrix_configure_master
   \       0xE8   0xE295'5001        ADDS     R5,R5,#+1
   \       0xEC   0xEAFF'FFF6        B        ??matrix_set_default_config_6
    194          
    195          	for (s_id = 0; s_id <= H32MX_SLAVE_COUNT; s_id++) {
   \                     ??matrix_set_default_config_7:
   \       0xF0   0xE3A0'4000        MOV      R4,#+0
   \                     ??matrix_set_default_config_8:
   \       0xF4   0xE354'0007        CMP      R4,#+7
   \       0xF8   0x2A00'001B        BCS      ??matrix_set_default_config_9
    196          		matrix_configure_slave(MATRIX1, s_id, MATRIX_SCFG_FIXED_DEFMSTR(0) |
    197          			MATRIX_SCFG_DEFMSTR_TYPE_NONE | MATRIX_SCFG_SLOT_CYCLE_Msk);
   \       0xFC   0xE300'21FF        MOVW     R2,#+511
   \      0x100   0xE1B0'1004        MOVS     R1,R4
   \      0x104   0xE6EF'1071        UXTB     R1,R1
   \      0x108   0xE1B0'0007        MOVS     R0,R7
   \      0x10C   0x....'....        BL       matrix_configure_slave
    198          		for (m_id = 0; m_id <= H32MX_MASTER_COUNT; m_id++)
   \      0x110   0xE3A0'0000        MOV      R0,#+0
   \      0x114   0xE1B0'5000        MOVS     R5,R0
   \                     ??matrix_set_default_config_10:
   \      0x118   0xE355'0009        CMP      R5,#+9
   \      0x11C   0x2A00'0008        BCS      ??matrix_set_default_config_11
    199          			matrix_master_priority_for_slave(MATRIX1, s_id, m_id, 0);
   \      0x120   0xE3A0'3000        MOV      R3,#+0
   \      0x124   0xE1B0'2005        MOVS     R2,R5
   \      0x128   0xE6EF'2072        UXTB     R2,R2
   \      0x12C   0xE1B0'1004        MOVS     R1,R4
   \      0x130   0xE6EF'1071        UXTB     R1,R1
   \      0x134   0xE1B0'0007        MOVS     R0,R7
   \      0x138   0x....'....        BL       matrix_master_priority_for_slave
   \      0x13C   0xE295'5001        ADDS     R5,R5,#+1
   \      0x140   0xEAFF'FFF4        B        ??matrix_set_default_config_10
    200          		matrix_configure_slave_sec(MATRIX1, s_id, 0xFF, 0xFF, 0xFF);
   \                     ??matrix_set_default_config_11:
   \      0x144   0xE3A0'00FF        MOV      R0,#+255
   \      0x148   0xE58D'0000        STR      R0,[SP, #+0]
   \      0x14C   0xE3A0'30FF        MOV      R3,#+255
   \      0x150   0xE3A0'20FF        MOV      R2,#+255
   \      0x154   0xE1B0'1004        MOVS     R1,R4
   \      0x158   0xE6EF'1071        UXTB     R1,R1
   \      0x15C   0xE1B0'0007        MOVS     R0,R7
   \      0x160   0x....'....        BL       matrix_configure_slave_sec
    201          	}
   \      0x164   0xE294'4001        ADDS     R4,R4,#+1
   \      0x168   0xEAFF'FFE1        B        ??matrix_set_default_config_8
    202          }
   \                     ??matrix_set_default_config_9:
   \      0x16C   0xE8BD'80F1        POP      {R0,R4-R7,PC}    ;; return

   \                                 In section SOFTPACK, align 4, keep-with-next
   \                     ??DataTable3:
   \        0x0   0x....'....        DC32     ?_1

   \                                 In section SOFTPACK, align 4, keep-with-next
   \                     ??DataTable3_1:
   \        0x0   0x....'....        DC32     ?_0

   \                                 In section SOFTPACK, align 4, keep-with-next
   \                     ??DataTable3_2:
   \        0x0   0x....'....        DC32     ?_2

   \                                 In section SOFTPACK, align 4, keep-with-next
   \                     ??DataTable3_3:
   \        0x0   0x4D41'5400        DC32     0x4d415400

   \                                 In section .rodata, align 4
   \                     ?_0:
   \        0x0   0x6D 0x5F          DC8 "m_id < 16"

   \              0x69 0x64    

   \              0x20 0x3C    

   \              0x20 0x31    

   \              0x36 0x00
   \        0xA   0x00 0x00          DC8 0, 0

   \                                 In section .rodata, align 4
   \                     ?_1:
   \        0x0   0x43 0x3A          DC8 0x43, 0x3A, 0x5C, 0x77, 0x6F, 0x72, 0x6B, 0x5C

   \              0x5C 0x77    

   \              0x6F 0x72    

   \              0x6B 0x5C
   \        0x8   0x41 0x74          DC8 0x41, 0x74, 0x6D, 0x65, 0x6C, 0x53, 0x6F, 0x66

   \              0x6D 0x65    

   \              0x6C 0x53    

   \              0x6F 0x66
   \       0x10   0x74 0x50          DC8 0x74, 0x50, 0x41, 0x63, 0x6B, 0x5C, 0x61, 0x74

   \              0x41 0x63    

   \              0x6B 0x5C    

   \              0x61 0x74
   \       0x18   0x6D 0x65          DC8 0x6D, 0x65, 0x6C, 0x2D, 0x73, 0x6F, 0x66, 0x74

   \              0x6C 0x2D    

   \              0x73 0x6F    

   \              0x66 0x74
   \       0x20   0x77 0x61          DC8 0x77, 0x61, 0x72, 0x65, 0x2D, 0x70, 0x61, 0x63

   \              0x72 0x65    

   \              0x2D 0x70    

   \              0x61 0x63
   \       0x28   0x6B 0x61          DC8 0x6B, 0x61, 0x67, 0x65, 0x2D, 0x32, 0x2E, 0x31

   \              0x67 0x65    

   \              0x2D 0x32    

   \              0x2E 0x31
   \       0x30   0x37 0x5C          DC8 0x37, 0x5C, 0x64, 0x72, 0x69, 0x76, 0x65, 0x72

   \              0x64 0x72    

   \              0x69 0x76    

   \              0x65 0x72
   \       0x38   0x73 0x5C          DC8 0x73, 0x5C, 0x70, 0x65, 0x72, 0x69, 0x70, 0x68

   \              0x70 0x65    

   \              0x72 0x69    

   \              0x70 0x68
   \       0x40   0x65 0x72          DC8 0x65, 0x72, 0x61, 0x6C, 0x73, 0x5C, 0x6D, 0x61

   \              0x61 0x6C    

   \              0x73 0x5C    

   \              0x6D 0x61
   \       0x48   0x74 0x72          DC8 0x74, 0x72, 0x69, 0x78, 0x2E, 0x63, 0

   \              0x69 0x78    

   \              0x2E 0x63    

   \              0x00
   \       0x4F   0x00               DC8 0

   \                                 In section .rodata, align 4
   \                     ?_2:
   \        0x0   0x73 0x6C          DC8 "slave_id != 0"

   \              0x61 0x76    

   \              0x65 0x5F    

   \              0x69 0x64    

   \              0x20 0x21    

   \              0x3D 0x20    

   \              0x30 0x00
   \        0xE   0x00 0x00          DC8 0, 0
    203          #endif
    204          

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       0   matrix_configure_master
       0   matrix_configure_slave
       8   matrix_configure_slave_sec
       0   matrix_is_peripheral_secured
      24   matrix_master_priority_for_slave
        24   -> __aeabi_assert
        24   -> __iar_EmptyStepPoint
       8   matrix_remap_ram
         8   -> cache_clean_region
         8   -> cache_invalidate_region
         8   -> icache_invalidate
       8   matrix_remap_rom
         8   -> cache_invalidate_region
         8   -> icache_invalidate
       0   matrix_remove_write_protection
      24   matrix_set_default_config
        24   -> matrix_configure_master
        24   -> matrix_configure_slave
        24   -> matrix_configure_slave_sec
        24   -> matrix_master_priority_for_slave
        24   -> matrix_remove_write_protection
      24   matrix_set_slave_region_size
        24   -> __aeabi_assert
        24   -> __iar_EmptyStepPoint
      16   matrix_set_slave_split_addr


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable3
       4  ??DataTable3_1
       4  ??DataTable3_2
       4  ??DataTable3_3
      12  ?_0
      80  ?_1
      16  ?_2
      20  matrix_configure_master
      24  matrix_configure_slave
      64  matrix_configure_slave_sec
      56  matrix_is_peripheral_secured
     220  matrix_master_priority_for_slave
      76  matrix_remap_ram
      64  matrix_remap_rom
      12  matrix_remove_write_protection
     368  matrix_set_default_config
     180  matrix_set_slave_region_size
     124  matrix_set_slave_split_addr

 
   108 bytes in section .rodata
 1'224 bytes in section SOFTPACK
 
 1'224 bytes of CODE  memory
   108 bytes of CONST memory

Errors: none
Warnings: none
